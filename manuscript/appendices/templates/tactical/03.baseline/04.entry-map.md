# üåê Controller / Endpoint Map

A tactical doc for codebases where Controllers or Endpoints act as pseudo-services. Focus is on mapping entry points, tables touched, and side effects.

---

## Controller / Endpoint

**Name:** `[Controller@method or HTTP endpoint]`
**File:** `[path/to/file.php]`

---

## 1. Summary

**Description:** \[What this endpoint/controller action does in business terms]
**Tables Touched:** `[table_1, table_2]`
**Side Effects:** `[queues, emails, logs, external APIs]`

---

## 2. Input / Output

* **Input:** `[Request params or payload]`
* **Output:** `[Response, view, redirect, API payload]`

---

## 3. Queries Inside

| # | Query Snippet / Location             | Operation (Read/Write) | Tables Hit | Notes (Business Meaning) |
| - | ------------------------------------ | ---------------------- | ---------- | ------------------------ |
| 1 | `SELECT ... FROM invoices` (line 45) | Read                   | invoices   | Fetch invoices list      |
| 2 | `INSERT INTO payments ...` (line 88) | Write                  | payments   | Record payment event     |

---

## 4. Linked Components

* **Models / Helpers Used:** `[ModelName, HelperClass]`
* **Routes:** `[GET /endpoint, POST /endpoint]`
* **Middleware:** `[Auth, Logging, etc.]`

---

## 5. Notes & Risks

* `[path:line]` - Risk of N+1 queries
* `[path:line]` - Critical payment write with no transaction wrapping

---

üëâ **In short:** Each controller/endpoint doc shows what comes in, what goes out, which tables it messes with, and the hidden landmines inside.
